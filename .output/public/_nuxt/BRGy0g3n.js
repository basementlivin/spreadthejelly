import{b as A,e as N,S as V,f as z,_ as B}from"./BVItSl9C.js";import{_ as D}from"./lPfZSMqf.js";import{c as M}from"./DN-QqGUD.js";import{u as I}from"./C82W4jBz.js";import{k as E,b as r,_ as T,I as s,Q as t,M as m,u as o,V as n,G as Z,a0 as q,W as _,$ as w,L as F,X as G}from"./DMMtVaVQ.js";import"./tPFxGkv5.js";const Q={id:"main",class:"page--blog"},W={key:0,class:"blog__articles wrapper wrapper--fullscreen"},X={class:"articles__container"},Y={class:"article__image"},$={class:"article__details"},j={class:"tag"},H={class:"headline"},J={key:1,class:"articles__no-more"},K=9,O=6,R=E({__name:"index",async setup(U){let p,g;const f=A(),d=r([]),v=r(1),l=r(!0),c=r(!1),{data:e,error:h}=N("blogPage",()=>f.client.getSingle("blog"));h.value&&console.error("Error value from useAsyncData:",h.value);const b=async(k=!1)=>{if(c.value||!l.value)return;c.value=!0;const u=k?K:O,i=await f.client.getByType("blog_article",{pageSize:u,page:v.value,orderings:{field:"my.blog_article.publication_date",direction:"desc"}});d.value.push(...i.results),i.results_size<u&&(l.value=!1),v.value++,c.value=!1},L=()=>{b()};return[p,g]=T(()=>b(!0)),await p,g(),I(e),(k,u)=>{var y,x,S;const i=V,P=D,C=z;return s(),t("main",Q,[m(i,{slices:((y=o(e))==null?void 0:y.data.slices)??[],components:o(M)},null,8,["slices","components"]),d.value.length?(s(),t("section",W,[n("div",X,[(s(!0),t(Z,null,q(d.value,a=>(s(),t("div",{key:a.id,class:"article"},[n("div",Y,[m(P,{src:a.data.featured_image.url??"",alt:a.data.featured_image.alt??""},null,8,["src","alt"])]),n("div",$,[n("span",j,_(a.tags[0]),1),n("p",H,_(a.data.title),1),m(C,{field:a,class:"link"},{default:F(()=>[G(" read more ")]),_:2},1032,["field"])])]))),128))]),l.value&&!c.value?(s(),t("span",{key:0,class:"articles__load-more link","aria-label":"Load more articles",onClick:L},_((x=o(e))!=null&&x.data.load_more_button_text?o(e).data.load_more_button_text:"Load More"),1)):l.value?w("",!0):(s(),t("p",J,_((S=o(e))!=null&&S.data.no_more_articles_message?o(e).data.no_more_articles_message:"You made it to the end!"),1))])):w("",!0)])}}}),le=B(R,[["__scopeId","data-v-75faae77"]]);export{le as default};
