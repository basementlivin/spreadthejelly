import{b as A,e as N,S as V,f as z,_ as B}from"./Dt6_ZTf9.js";import{_ as D}from"./CguOJ1NI.js";import{c as M}from"./CUQjUXFL.js";import{u as I}from"./rZtc5cEh.js";import{k as E,b as r,_ as T,I as s,Q as t,M as m,u as o,V as n,G as Z,a0 as $,W as _,$ as w,L as q,X as F}from"./DuWOax_G.js";import"./BgVDyAlK.js";const G={id:"main",class:"page--blog"},Q={key:0,class:"blog__articles wrapper wrapper--fullscreen"},W={class:"articles__container"},X={class:"article__image"},Y={class:"article__details"},j={class:"tag"},H={class:"headline"},J={key:1,class:"articles__no-more"},K=9,O=6,R=E({__name:"index",async setup(U){let p,g;const f=A(),d=r([]),v=r(1),l=r(!0),i=r(!1),{data:e,error:h}=N("blogPage",()=>f.client.getSingle("blog"));h.value&&console.error("Error value from useAsyncData:",h.value);const b=async(k=!1)=>{if(i.value||!l.value)return;i.value=!0;const u=k?K:O,c=await f.client.getByType("blog_article",{pageSize:u,page:v.value,orderings:{field:"my.blog_article.publication_date",direction:"desc"}});d.value.push(...c.results),c.results_size<u&&(l.value=!1),v.value++,i.value=!1},L=()=>{b()};return[p,g]=T(()=>b(!0)),await p,g(),I(e),(k,u)=>{var y,x,S;const c=V,P=D,C=z;return s(),t("main",G,[m(c,{slices:((y=o(e))==null?void 0:y.data.slices)??[],components:o(M)},null,8,["slices","components"]),d.value.length?(s(),t("section",Q,[n("div",W,[(s(!0),t(Z,null,$(d.value,a=>(s(),t("div",{key:a.id,class:"article"},[n("div",X,[m(P,{src:a.data.featured_image.url??"",alt:a.data.featured_image.alt??""},null,8,["src","alt"])]),n("div",Y,[n("span",j,_(a.tags[0]),1),n("p",H,_(a.data.title),1),m(C,{field:a,class:"link"},{default:q(()=>[F(" read more ")]),_:2},1032,["field"])])]))),128))]),l.value&&!i.value?(s(),t("span",{key:0,class:"articles__load-more link","aria-label":"Load more articles",onClick:L},_((x=o(e))!=null&&x.data.load_more_button_text?o(e).data.load_more_button_text:"Load More"),1)):l.value?w("",!0):(s(),t("p",J,_((S=o(e))!=null&&S.data.no_more_articles_message?o(e).data.no_more_articles_message:"You made it to the end!"),1))])):w("",!0)])}}}),le=B(R,[["__scopeId","data-v-75faae77"]]);export{le as default};
